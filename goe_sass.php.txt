# goe_sass v0.1
# Allow use of SASS for CSS output.
# Georg Oechsler
# http://txp.oechsler.de/

# ......................................................................
# This is a plugin for Textpattern - http://textpattern.com/
# To install: textpattern > admin > plugins
# Paste the following text into the 'Install plugin' box:
# ......................................................................

YToxMDp7czo3OiJ2ZXJzaW9uIjtzOjM6IjAuMSI7czo2OiJhdXRob3IiO3M6MTQ6Ikdlb3Jn
IE9lY2hzbGVyIjtzOjEwOiJhdXRob3JfdXJpIjtzOjIzOiJodHRwOi8vdHhwLm9lY2hzbGVy
LmRlLyI7czoxMToiZGVzY3JpcHRpb24iO3M6MzM6IkFsbG93IHVzZSBvZiBTQVNTIGZvciBD
U1Mgb3V0cHV0LiI7czo1OiJmbGFncyI7aToyO3M6NDoidHlwZSI7aToxO3M6NDoibmFtZSI7
czo4OiJnb2Vfc2FzcyI7czo0OiJoZWxwIjtzOjMzMDI6Igo8aDE+U2Fzc2lmeSBUZXh0cGF0
dGVybiE8L2gxPgoKPHA+VGhpcyBwbHVnaW4gYWxsb3dzIHRoZSB1c2Ugb2YgPGEgaHJlZj0i
aHR0cDovL3Nhc3MtbGFuZy5jb20vIj5TQVNTPC9hPiBmb3IgQ1NTIHByZXByb2Nlc3NpbmcK
d2l0aGluIHRleHRwYXR0ZXJuLjwvcD4KCjxwPkl0IHdpbGwgY29tcGlsZSB0aGUgU0FTUyBj
b2RlIHlvdSBkZWZpbmUgd2l0aGluIHRoZSByZWd1bGFyIENTUyBzdHlsZSBmb3JtIHRvCnN0
YXRpYyBDU1MgZmlsZXMsIHNlcnZpbmcgaXQgdGhyb3VnaCBhIHRhZyB3aGljaCBpcyBxdWl0
ZSBzaW1pbGFyIHRvIHRoZSB3ZWxsCmtub3duICZsdDt0eHA6Y3NzIC8mZ3Q7IHRhZy48L3A+
Cgo8cD5UaGlzIHBsdWdpbiByZWxpZXMgb24gPGEgaHJlZj0iaHR0cDovL3BocHNhc3MuY29t
LyI+cGhwU0FTUzwvYT4gYW5kIGJvcnJvd3MgY29kZSBmcm9tIHRoZQo8YSBocmVmPSJodHRw
czovL2RydXBhbC5vcmcvcHJvamVjdC9zYXNzeSI+c2Fzc3k8L2E+IG1vZHVsZSBmb3IgRHJ1
cGFsLjwvcD4KCjxwPkl0IHN0YXJ0ZWQgb2ZmIGFzIGEgaGFjayBvZiA8YSBocmVmPSJodHRw
Oi8vdGV4dHBhdHRlcm4ub3JnL3BsdWdpbnMvOTM0L3J2bV9jc3MiPnJ2bV9jc3M8L2E+LAp3
aGljaCBjYW4gZG8gc2ltaWxhciB0aGluZ3Mgd2l0aCBMRVNTLiBVbmRlciB0aGUgaG9vZCB5
b3Ugd2lsbCBmaW5kIHRoYXQgaXQgaXMgc3RpbGwKaGVhdmlseSBiYXNlZCBvbiB0aGUgY29k
ZSBvZiB0aGUgZ3JlYXQgPGEgaHJlZj0iaHR0cDovL3Zhbm1lbGljay5jb20vIj5SdXVkIHZh
biBNZWxpY2s8L2E+LjwvcD4KCjxoMj5JbnN0YWxsYXRpb248L2gyPgoKPG9sPgo8bGk+R3Jh
YiBhIGNvcHkgb2YgPGEgaHJlZj0iaHR0cDovL3BocHNhc3MuY29tLyI+UEhQU2FzczwvYT4g
YW5kIHB1dCBpdCBzb21ld2hlcmUgeW91cgp3ZWJzZXJ2ZXIgY2FuIGZpbmQgaXQuIFRoZSBk
ZWZhdWx0IGxvY2F0aW9uIGlzICYjODIxNjt0ZXh0cGF0dGVybi92ZW5kb3IvcGhwc2FzcyYj
ODIxNzsuPC9saT4KPGxpPkNyZWF0ZSBhIGRpcmVjdG9yeSBmb3IgdGhlIHN0YXRpYyBDU1Mg
ZmlsZXMgb24geW91ciB3ZWJzZXJ2ZXIuIFlvdSBzaG91bGQgbWFrZQpzdXJlIHRoYXQgUEhQ
IGlzIGFibGUgdG8gd3JpdGUgdG8gdGhhdCBkaXJlY3RvcnkuIFRoZSBkZWZhdWx0IHBhdGgg
dG8gdGhpcwpkaXJlY3RvcnkgaXMgL2Nzcy48L2xpPgo8bGk+SW5zdGFsbCBhbmQgZW5hYmxl
IHRoZSBwbHVnaW4gbGlrZSBhbnkgb3RoZXIgcGx1Z2luIG91dCB0aGVyZS48L2xpPgo8bGk+
Q2hlY2sgYW5kIGFkanVzdCB0aGUgY29uZmlndXJhdGlvbiB1bmRlciB0aGUgZXh0ZW5zaW9u
cyB0YWIuIEl0IHNoaXBzIHdpdGgKc2FuZSBkZWZhdWx0LiBTZWUgc2VjdGlvbiAmIzgyMjA7
Q29uZmlndXJhdGlvbiYjODIyMTsgZm9yIGRldGFpbHMuPC9saT4KPGxpPklmIHlvdSB3YW50
IHRvIHBsYXkgc2FmZTogUmVzYXZlIGEgQ1NTIHN0eWxlIGRlZmluaXRpb24gZm9ybSBhbmQg
c2VlIGlmIHRoZXJlCmlzIGEgZmlsZSB3cml0dGVuIHRvIHRoZSBvdXRwdXQgZGlyZWN0b3J5
IHlvdSBoYXZlIGNvbmZpZ3VyZWQgaW4gc3RlcCAyLiBZb3UmIzgyMTc7bGwKbmVlZCB0byBy
ZXNhdmUgYWxsIHlvdXIgc3R5bGUgc2hlZXRzIGFueXdheSB0byBjcmVhdGUgdGhlIHN0YXRp
YyBmaWxlcy48L2xpPgo8bGk+T25jZSB5b3VyIHNldCB5b3UgbWF5IHJlcGxhY2UgYWxsIG9j
Y3VycmVuY2VzIG9mICZsdDt0eHA6Y3NzIC8mZ3Q7IHdpdGgKJmx0O3R4cDpnb2Vfc2FzcyAv
Jmd0Oy48L2xpPgo8L29sPgoKPHA+VGhlICZsdDt0eHA6Z29lX3Nhc3MgLyZndDsgdGFnIHN1
cHBsaWVkIGJ5IHRoaXMgcGx1Z2luIGhhcyB0aGUgZXhhY3Qgc2FtZQphdHRyaWJ1dGVzIGFz
IHRoZSBidWlsdC1pbiAmbHQ7dHhwOmNzcyAvJmd0OyB0YWcgYW5kIGNhbiBiZSB1c2VkIGFz
IGEgZHJvcC1pbgpyZXBsYWNlbWVudC48L3A+Cgo8cD5Ob3RlOiBCZWNhdXNlIG5vdCBhbGwg
Y2hhcmFjdGVycyBhcmUgYWxsb3dlZCBpbiBmaWxlbmFtZXMsIGF2b2lkIHVzaW5nCm5vbi1h
bHBoYW51bWVyaWMgY2hhcmFjdGVycyBpbiBzdHlsZSBzaGVldCBuYW1lcy48L3A+Cgo8aDI+
Q29uZmlndXJhdGlvbjwvaDI+Cgo8cD5UaGVyZSBhcmUgZm91ciBjb25maWd1cmF0aW9uIGl0
ZW1zIGZvciB0aGlzIHBsdWdpbjo8L3A+Cgo8ZGw+CjxkdD5QYXRoIHRvIFBIUFNhc3M8L2R0
Pgo8ZGQ+VGhlIGZpbGVzeXN0ZW0gcGF0aCB0byBQSFBTYXNzLiBUaGlzIGlzIHdoZXJlIHRo
ZSBmaWxlIFNhc3NQYXJzZXIucGhwIHNpdHMgaW4uPC9kZD4KPGRkPmRlZmF1bHQgdmFsdWU6
IFtwYXRoIHRvIHRleHRwYXR0ZXJuIGRpcmVjdG9yeV0gKyB2ZW5kb3IvcGhwc2FzczwvZGQ+
CjwvZGw+Cgo8ZGw+CjxkdD5DU1MgT3V0cHV0IERpcmVjdG9yeTwvZHQ+CjxkZD5UaGUgbG9j
YXRpb24gb2YgdGhlIGNzcyBvdXRwdXQgZGlyZWN0b3J5IHJlbGF0aXZlIHRvIGRvY3VtZW50
IHJvb3QuPC9kZD4KPGRkPmRlZmF1bHQgdmFsdWU6IC9jc3M8L2RkPgo8L2RsPgoKPGRsPgo8
ZHQ+T3V0cHV0IFN0eWxlPC9kdD4KPGRkPlRoZXJlIGFyZSBzZXZlcmFsIG91dHB1dCBzdHls
ZXMgdG8gY2hvb3NlIGZyb20uIENob2ljZSBpcyB5b3Vycy48L2RkPgo8ZGQ+bmVzdGVkOiBF
YWNoIHByb3BlcnR5K3NlbGVjdG9yIHRha2VzIHVwIDEgbGluZSBzZWxlY3RvciBpbmRlbnRh
dGlvbiByZWZsZWN0cyBuZXN0aW5nIGRlcHRoLjwvZGQ+CjxkZD5leHBhbmRlZDogRWFjaCBw
cm9wZXJ0eStzZWxlY3RvciB0YWtlcyB1cCAxIGxpbmUgbm8gc2VsZWN0b3IgaW5kZW50YXRp
b24uPC9kZD4KPGRkPmNvbXBhY3Q6IEVhY2ggc2VsZWN0b3IgdGFrZXMgdXAgMSBsaW5lIHdp
dGggcHJvcGVydGllcyBvbiB0aGUgc2FtZSBsaW5lLiBObyBpbmRlbnRhdGlvbi48L2RkPgo8
ZGQ+Y29tcHJlc3NlZDogQ29tcHJlc3NlZDogQWxtb3N0IG5vIHdoaXRlc3BhY2UgZGVzaWdu
ZWQgdG8gYmUgYXMgc3BhY2UtZWZmaWNpZW50IGFzIHBvc3NpYmxlLjwvZGQ+CjxkZD5kZWZh
dWx0IHZhbHVlOiBuZXN0ZWQ8L2RkPgo8L2RsPgoKPGRsPgo8ZHQ+TGFuZ3VhZ2UgU3ludGF4
PC9kdD4KPGRkPlBIUFNhc3Mgc3VwcG9ydHMgdHdvIHN5bnRheCBvcHRpb25zLjwvZGQ+Cjxk
ZD5zY3NzOiBUaGUgcmVndWxhciAmIzgyMjA7U2Fzc3kgQ1NTJiM4MjIxOyBzdHlsZSB3aGlj
aCBpcyBhIHN1cGVyc2V0IG9mIENTUzMmIzgyMTc7cyBzeW50YXguPC9kZD4KPGRkPnNhc3M6
IFRoZSBvbGRlciBzeW50YXgga25vd24gYXMgdGhlIGluZGVudGVkIHN5bnRheC48L2RkPgo8
ZGQ+ZGVmYXVsdCB2YWx1ZTogc2NzczwvZGQ+CjwvZGw+CjwvZGl2PgoKIjtzOjQ6ImNvZGUi
O3M6NzE1MToiaWYgKHR4cGludGVyZmFjZSA9PSAnYWRtaW4nKSB7CiAgcmVnaXN0ZXJfY2Fs
bGJhY2soJ2dvZV9zYXNzX2Nzc19zYXZlJywgJ2NzcycsICdjc3Nfc2F2ZScpOwogIHJlZ2lz
dGVyX2NhbGxiYWNrKCdnb2Vfc2Fzc19jc3Nfc2F2ZScsICdjc3MnLCAnY3NzX3NhdmVfcG9z
dGVkJyk7CiAgcmVnaXN0ZXJfY2FsbGJhY2soJ2dvZV9zYXNzX2Nzc19zYXZlJywgJ2Nzcycs
ICdkZWxfZGVjJyk7CiAgcmVnaXN0ZXJfY2FsbGJhY2soJ2dvZV9zYXNzX2Nzc19kZWxldGUn
LCAnY3NzJywgJ2Nzc19kZWxldGUnKTsKICByZWdpc3Rlcl9jYWxsYmFjaygnZ29lX3Nhc3Nf
Y2xlYW51cCcsICdwbHVnaW5fbGlmZWN5Y2xlLmdvZV9zYXNzJywgJ2RlbGV0ZWQnKTsKICBy
ZWdpc3Rlcl9jYWxsYmFjaygnZ29lX3Nhc3NfZGVmYXVsdF9wcmVmcycsICdwbHVnaW5fbGlm
ZWN5Y2xlLmdvZV9zYXNzJywgJ2VuYWJsZWQnKTsKICByZWdpc3Rlcl9jYWxsYmFjaygnZ29l
X3Nhc3NfcHJlZnMnLCAncGx1Z2luX3ByZWZzLmdvZV9zYXNzJyk7CgogIC8vIFJlZ2lzdGVy
IGV2ZW50IHNhc3Njb25maWcgd2l0aCBvd24gdGFiIHVuZGVyIGV4dGVuc2lvbnMgYW5kIHJl
c3BlY3RpdmUgY2FsbGJhY2suCiAgYWRkX3ByaXZzKCdnb2Vfc2Fzc19jb25maWcnKTsKICBy
ZWdpc3Rlcl90YWIoJ2V4dGVuc2lvbnMnLCAnZ29lX3Nhc3NfY29uZmlnJywgZ1R4dCgnU0FT
UyBDb25maWd1cmF0aW9uJykpOwogIHJlZ2lzdGVyX2NhbGxiYWNrKCdnb2Vfc2Fzc19jb25m
aWcnLCAnZ29lX3Nhc3NfY29uZmlnJyk7Cn0KCgovKioKICogQ29kZSBmb3IgdGhlIDx0eHA6
Z29lX3Nhc3MgLz4gdGFnLgogKgogKiBCZWhhdmVzIHByZXR0eSBtdWNoIGxpa2UgPHR4cDpj
c3MgLz4gdGFnLCBidXQgbGlua3Mgb3VyIGNvbXBpbGVkIFNBU1Mgb3V0cHV0CiAqIGFzIHN0
YXRpYyBmaWxlcy4KICovCmZ1bmN0aW9uIGdvZV9zYXNzKCRhdHRzKSB7CiAgZ2xvYmFsICR0
eHBfZXJyb3JfY29kZSwgJHMsICRwYXRoX3RvX3NpdGUsICR2ZXJzaW9uOwoKICAkZ29lX3Nh
c3NfY3NzX2RpciA9IHNhZmVfZmllbGQoJ3ZhbCcsICd0eHBfcHJlZnMnLCAibmFtZT0nZ29l
X3Nhc3NfY3NzX2RpciciKTsKCiAgZXh0cmFjdChsQXR0cyhhcnJheSgKICAgICdmb3JtYXQn
ID0+ICd1cmwnLAogICAgJ21lZGlhJyAgPT4gJ3NjcmVlbicsCiAgICAnbicgICAgICA9PiAn
JywKICAgICduYW1lJyAgID0+ICcnLAogICAgJ3JlbCcgICAgPT4gJ3N0eWxlc2hlZXQnLAog
ICAgJ3RpdGxlJyAgPT4gJycsCiAgKSwgJGF0dHMpKTsKCiAgaWYgKCEkbiBhbmQgISRuYW1l
KSB7CiAgICBpZiAoJHMpIHsKICAgICAgJG5hbWUgPSBzYWZlX2ZpZWxkKCdjc3MnLCAndHhw
X3NlY3Rpb24nLCAibmFtZT0nIi5kb1NsYXNoKCRzKS4iJyIpOwogICAgfQogICAgZWxzZSB7
CiAgICAgICRuYW1lID0gJ2RlZmF1bHQnOwogICAgfQogIH0KICBlbHNlaWYgKCEkbmFtZSkg
ewogICAgJG5hbWUgPSAkbjsKICB9CgogICRmaWxlID0gJGdvZV9zYXNzX2Nzc19kaXIgLiAn
LycgLiBzdHJ0b2xvd2VyKHNhbml0aXplRm9yVXJsKCRuYW1lKSkuJy5jc3MnOwoKICBpZiAo
ZW1wdHkoJGdvZV9zYXNzX2Nzc19kaXIpIG9yICFpc19yZWFkYWJsZSgkcGF0aF90b19zaXRl
LicvJy4kZmlsZSkpIHsKICAgIGlmICh2ZXJzaW9uX2NvbXBhcmUoJHZlcnNpb24sICc0LjMu
MCcsICc+PScpKSB7CiAgICAgIHVuc2V0KCRhdHRzWyduJ10pOwogICAgICAkYXR0c1snbmFt
ZSddID0gJG5hbWU7CiAgICB9IGVsc2UgewogICAgICB1bnNldCgkYXR0c1snbmFtZSddKTsK
ICAgICAgJGF0dHNbJ24nXSA9ICRuYW1lOwogICAgfQogICAgcmV0dXJuIGNzcygkYXR0cyk7
CiAgfQoKICBpZiAoJGZvcm1hdCA9PSAnbGluaycpIHsKICAgIHJldHVybiAnPGxpbmsgcmVs
PSInLiRyZWwuJyIgdHlwZT0idGV4dC9jc3MiJy4KICAgICAgKCRtZWRpYSA/ICcgbWVkaWE9
IicuJG1lZGlhLiciJyA6ICcnKS4KICAgICAgKCR0aXRsZSA/ICcgdGl0bGU9IicuJHRpdGxl
LiciJyA6ICcnKS4KICAgICAgJyBocmVmPSInLmh1LiRmaWxlLiciIC8+JzsKICB9CgogIHJl
dHVybiBodS4kZmlsZTsKfQoKLyoqCiAqIENhbGxiYWNrIGZvciB0aGUgImNzc19zYXZlIiBl
dmVudC4KICoKICogQ29tcGlsZSBTQVNTIGNvZGUgZnJvbSBkYXRhYmFzZSBhbmQgc2F2ZSBp
dCB0byBDU1MgZmlsZXMuCiAqLwpmdW5jdGlvbiBnb2Vfc2Fzc19jc3Nfc2F2ZSgpIHsKICBn
bG9iYWwgJHBhdGhfdG9fc2l0ZTsKCiAgJHZhcnMgPSBnb2Vfc2Fzc192YXJzKCk7CiAgZm9y
ZWFjaCAoJHZhcnMgYXMgJHZhciA9PiAkZGF0YSkgewogICAgJCR2YXIgPSBzYWZlX2ZpZWxk
KCd2YWwnLCAndHhwX3ByZWZzJywgIm5hbWU9JyR2YXInIik7CiAgfQoKICAkbmFtZSA9IChw
cygnY29weScpIG9yIHBzKCdzYXZlbmV3JykpID8gcHMoJ25ld25hbWUnKSA6IHBzKCduYW1l
Jyk7CiAgJGZpbGVuYW1lID0gc3RydG9sb3dlcihzYW5pdGl6ZUZvclVybCgkbmFtZSkpOwoK
ICBpZiAoZW1wdHkoJGdvZV9zYXNzX2Nzc19kaXIpIG9yICEkZmlsZW5hbWUpIHsKICAgIHJl
dHVybjsKICB9CgogICRjc3MgPSBzYWZlX2ZpZWxkKCdjc3MnLCAndHhwX2NzcycsICJuYW1l
PSciLmRvU2xhc2goJG5hbWUpLiInIik7CgogIGlmICgkY3NzKSB7CiAgICBpZiAocHJlZ19t
YXRjaCgnIV5bYS16QS1aMC05LytdKj17MCwyfSQhJywgJGNzcykpIHsKICAgICAgJGNzcyA9
IGJhc2U2NF9kZWNvZGUoJGNzcyk7CiAgICB9CgogICAgJGxpYnJhcnkgPSAkZ29lX3Nhc3Nf
cGF0aCAuICcvU2Fzc1BhcnNlci5waHAnOwogICAgJHRlbXBsYXRlX2RpciA9ICRwYXRoX3Rv
X3NpdGUgLiAkZ29lX3Nhc3NfY3NzX2RpciAuICcvc2Fzcy10ZW1wbGF0ZXMnOwoKICAgIGlm
IChmaWxlX2V4aXN0cygkbGlicmFyeSkpIHsKICAgICAgdHJ5IHsKICAgICAgICByZXF1aXJl
X29uY2UgKCRsaWJyYXJ5KTsKCiAgICAgICAgJG9wdGlvbnMgPSBhcnJheSgKICAgICAgICAg
ICdkZWJ1ZycgPT4gVFJVRSwKICAgICAgICAgICdzeW50YXgnID0+ICRnb2Vfc2Fzc19zdHls
ZSwKICAgICAgICAgICdzdHlsZScgPT4gJGdvZV9zYXNzX3N0eWxlLAogICAgICAgICAgJ2xv
YWRfcGF0aHMnID0+IGFycmF5KCR0ZW1wbGF0ZV9kaXIpLAogICAgICAgICk7CgogICAgICAg
ICRwYXJzZXIgPSBuZXcgU2Fzc1BhcnNlcigkb3B0aW9ucyk7CiAgICAgICAgJGNzcyA9ICRw
YXJzZXItPnRvQ3NzKCRjc3MsIGZhbHNlKTsKICAgICAgfQogICAgICBjYXRjaCAoRXhjZXB0
aW9uICRlKSB7CiAgICAgICAgcHJpbnQgIjxzY3JpcHQ+YWxlcnQoJ1NBU1MgRXJyb3I6ICIg
LiBwcmVnX3JlcGxhY2UoJy9cbi8nLCAnICcsICRlLT5nZXRNZXNzYWdlKCkpIC4gIicpOzwv
c2NyaXB0PiI7CiAgICAgICAgcmV0dXJuOwogICAgICB9CiAgICB9CgogICAgJGZpbGUgPSAk
cGF0aF90b19zaXRlIC4gJy8nIC4gJGdvZV9zYXNzX2Nzc19kaXIgLiAnLycgLiAkZmlsZW5h
bWU7CiAgICAkaGFuZGxlID0gZm9wZW4oJGZpbGUgLiAnLmNzcycsICd3YicpOwogICAgZndy
aXRlKCRoYW5kbGUsICRjc3MpOwogICAgZmNsb3NlKCRoYW5kbGUpOwogICAgY2htb2QoJGZp
bGUgLiAnLmNzcycsIDA2NDQpOwogIH0KfQoKCi8qKgogKiBDYWxsYmFjayBmb3IgdGhlICJj
c3MiIGV2ZW50LgogKiBUcmlnZ2VyZWQgd2hlbiBjc3MgaXMgZGVsZXRlZC4KICoKICogVW5s
aW5rIGNvbXBpbGVkIGNzcyBmaWxlcy4KICovCmZ1bmN0aW9uIGdvZV9zYXNzX2Nzc19kZWxl
dGUoKQp7CiAgZ2xvYmFsICRwYXRoX3RvX3NpdGU7CgogICRnb2Vfc2Fzc19jc3NfZGlyID0g
c2FmZV9maWVsZCgndmFsJywgJ3R4cF9wcmVmcycsICJuYW1lPSdnb2Vfc2Fzc19jc3NfZGly
JyIpOwoKICBpZiAoc2FmZV9maWVsZCgnY3NzJywgJ3R4cF9jc3MnLCAibmFtZT0nIi5kb1Ns
YXNoKHBzKCduYW1lJykpLiInIikpIHsKICAgIHJldHVybjsKICB9CgogICRuYW1lID0gc3Ry
dG9sb3dlcihzYW5pdGl6ZUZvclVybChwcygnbmFtZScpKSk7CiAgJGZpbGUgPSAkcGF0aF90
b19zaXRlIC4gJGdvZV9zYXNzX2Nzc19kaXIgLiAnLycgLiAkbmFtZTsKCiAgaWYgKCFlbXB0
eSgkZ29lX3Nhc3NfY3NzX2RpcikgYW5kICRuYW1lKSB7CiAgICB1bmxpbmsoJGZpbGUuJy5j
c3MnKTsKICB9Cn0KCi8qKgogKiBIZWxwZXIgcmV0dXJuaW5nIGNvbmZpZ3VyYXRpb24gdmFy
aWFibGUgZGF0YS4KICovCmZ1bmN0aW9uIGdvZV9zYXNzX3ZhcnMoKSB7CiAgZ2xvYmFsICRw
YXRoX3RvX3NpdGU7CgogIHJldHVybiBhcnJheSgKICAgICdnb2Vfc2Fzc19wYXRoJyA9PiBh
cnJheSgKICAgICAgJ3RpdGxlJyA9PiAnUGF0aCB0byBQSFBTYXNzJywKICAgICAgJ2RlZmF1
bHQnID0+IHR4cGF0aCAuICcvdmVuZG9yL3BocHNhc3MnLAogICAgKSwKICAgICdnb2Vfc2Fz
c19jc3NfZGlyJyA9PiBhcnJheSgKICAgICAgJ3RpdGxlJyA9PiAnQ1NTIE91dHB1dCBEaXJl
Y3RvcnknLAogICAgICAnZGVmYXVsdCcgPT4gJy9jc3MnLAogICAgKSwKICAgICdnb2Vfc2Fz
c19zdHlsZScgPT4gYXJyYXkoCiAgICAgICd0aXRsZScgPT4gJ091dHB1dCBTdHlsZScsCiAg
ICAgICdkZWZhdWx0JyA9PiAnbmVzdGVkJywKICAgICksCiAgICAnZ29lX3Nhc3Nfc3ludGF4
JyA9PiBhcnJheSgKICAgICAgJ3RpdGxlJyA9PiAnTGFuZ3VhZ2UgU3ludGF4JywKICAgICAg
J2RlZmF1bHQnID0+ICdzY3NzJywKICAgICksCiAgKTsKfQoKLyoqCiAqIENhbGxiYWNrIGZv
ciB0aGUgInBsdWdpbl9saWZlY3ljbGUiIGV2ZW50LgogKiBUcmlnZ2VyZWQgd2hlbiB0aGUg
cGx1Z2luIGlzIGRlbGV0ZWQuCiAqCiAqIERpc3Bvc2UgY29uZmlnIHZhcmlhYmxlcy4KICov
CmZ1bmN0aW9uIGdvZV9zYXNzX2NsZWFudXAoJGV2ZW50LCAkc3RlcCkgewogICR2YXJzID0g
Z29lX3Nhc3NfdmFycygpOwoKICAvL0RlbGV0ZSBjb25maWcgdmFyaWFibGVzLgogIGZvcmVh
Y2ggKGFycmF5X2tleXMoJHZhcnMpIGFzICR2YXIpIHsKICAgIHNhZmVfZGVsZXRlKCd0eHBf
cHJlZnMnLCAibmFtZT0nJHZhciciKTsKICB9Cn0KCi8qKgogKiBDYWxsYmFjayBmb3IgdGhl
ICJnb2Vfc2Fzc19jb25maWciIGV2ZW50LgogKgogKiBTaG93IGFuZCBwcm9jZXNzIGNvbmZp
Z3VyYXRpb24gZm9ybS4KICovCmZ1bmN0aW9uIGdvZV9zYXNzX2NvbmZpZygkZXZlbnQsICRz
dGVwKSB7CgogIGluY2x1ZGUodHhwYXRoIC4gJy9pbmNsdWRlL3R4cF9wcmVmcy5waHAnKTsK
CiAgJHZhcnMgPSBnb2Vfc2Fzc192YXJzKCk7CgogIC8vIFJlYWQgdmFsdWUgZnJvbSBkYXRh
YmFzZSBvciB1c2UgZGVmYXVsdHMKICBmb3JlYWNoICgkdmFycyBhcyAkdmFyID0+ICRkYXRh
KSB7CiAgICAkJHZhciA9IHNhZmVfZmllbGQoJ3ZhbCcsICd0eHBfcHJlZnMnLCAibmFtZT0n
JHZhciciKTsKCiAgICBpZiAoISAkJHZhcikgewogICAgICBpZiAoJCR2YXIgPT09ICcnKSB7
CiAgICAgICAgc2FmZV91cGRhdGUoJ3R4cF9wcmVmcycsICJ2YWwgPSAneyRkYXRhWydkZWZh
dWx0J119JyIsICJuYW1lID0gJyR2YXInIGFuZCBwcmVmc19pZCA9JzEnIik7CiAgICAgIH0K
ICAgICAgZWxzZSB7CiAgICAgICAgc2FmZV9pbnNlcnQoJ3R4cF9wcmVmcycsICJuYW1lPSck
dmFyJywgdmFsPSd7JGRhdGFbJ2RlZmF1bHQnXX0nLCBwcmVmc19pZCA9JzEnIik7CiAgICAg
IH0KICAgICAgJCR2YXIgPSAkZGF0YVsnZGVmYXVsdCddOwogICAgfQogIH0KCiAgLy8gU2F2
ZSB2YWx1ZXMgaWYgZm9ybSB3YXMgc3VibWl0dGVkCiAgaWYgKGdwcygic3VibWl0IikpIHsK
ICAgIGZvcmVhY2ggKGFycmF5X2tleXMoJHZhcnMpIGFzICR2YXIpIHsKICAgICAgc2FmZV91
cGRhdGUoJ3R4cF9wcmVmcycsICJ2YWwgPSAnIi5hZGRzbGFzaGVzKHBzKCR2YXIpKS4iJyIs
Im5hbWUgPSAnJHZhcicgYW5kIHByZWZzX2lkID0nMSciKTsKICAgIH0KICAgIGhlYWRlcigi
TG9jYXRpb246IGluZGV4LnBocD9ldmVudD1zYXNzY29uZmlnIik7CiAgfQoKICAvLyBPdXRw
dXQgZm9ybQogICRzYXNzQ29uZmlnVHh0ID0gZ1R4dCgiU0FTUyBDb25maWd1cmF0aW9uIik7
CiAgcGFnZXRvcCgkc2Fzc0NvbmZpZ1R4dCk7CgogICR0ZGFTdHlsZSA9ICcgc3R5bGU9InRl
eHQtYWxpZ246cmlnaHQ7dmVydGljYWwtYWxpZ246bWlkZGxlIic7CiAgJGZvcm0gPSBzdGFy
dFRhYmxlKCJsaXN0IikgLiB0cih0ZGNzKGhlZCgkc2Fzc0NvbmZpZ1R4dCwxKSwyKSk7Cgog
IGZvcmVhY2ggKCR2YXJzIGFzICR2YXIgPT4gJGRhdGEpIHsKICAgICRmb3JtIC49IHRyKHRk
YShnVHh0KCRkYXRhWyd0aXRsZSddKSwgJHRkYVN0eWxlKSAuIHRkYSh0ZXh0X2lucHV0KCR2
YXIsICQkdmFyLCAnNDAnKSwgJycpKTsKICB9CgogICRmb3JtIC49IHRyKHRkYShncmFmKGZJ
bnB1dCgic3VibWl0Iiwic3VibWl0IiwgZ1R4dCgiU3VibWl0IiksICJwdWJsaXNoIikpLCAn
IGNvbHNwYW49IjIiJykpOwogICRmb3JtIC49IGVJbnB1dCgic2Fzc2NvbmZpZyIpOwogICRm
b3JtIC49IGVuZFRhYmxlKCk7CgogIGVjaG8gZm9ybSgkZm9ybSk7Cn0KCi8qKgogKiBDYWxs
YmFjayBmb3IgdGhlICJwbHVnaW5fbGlmZWN5Y2xlIiBldmVudC4KICogVHJpZ2dlcmVkIHdo
ZW4gdGhlIHBsdWdpbiBpcyBlbmFibGVkLgogKgogKiBTZXR1cCBkZWZhdWx0IGNvbmZpZyB2
YXJpYWJsZXMuCiAqLwpmdW5jdGlvbiBnb2Vfc2Fzc19kZWZhdWx0X3ByZWZzKCRldmVudCwg
JHN0ZXApIHsKCiAgaW5jbHVkZSh0eHBhdGggLiAnL2luY2x1ZGUvdHhwX3ByZWZzLnBocCcp
OwoKICAkdmFycyA9IGdvZV9zYXNzX3ZhcnMoKTsKCiAgLy8gSWYgdmFyaWFibGVzIGFyZSBu
b3Qgc2V0IG9yIGVtcHR5IHdyaXRlIGRlZmF1bHQgdmFsdWVzLgogIGZvcmVhY2ggKCR2YXJz
IGFzICR2YXIgPT4gJGRhdGEpIHsKICAgICQkdmFyID0gc2FmZV9maWVsZCgndmFsJywgJ3R4
cF9wcmVmcycsICJuYW1lPSckdmFyJyIpOwoKICAgIGlmICghICQkdmFyKSB7CiAgICAgIGlm
ICgkJHZhciA9PT0gJycpIHsKICAgICAgICBzYWZlX3VwZGF0ZSgndHhwX3ByZWZzJywgInZh
bCA9ICd7JGRhdGFbJ2RlZmF1bHQnXX0nIiwgIm5hbWUgPSAnJHZhcicgYW5kIHByZWZzX2lk
ID0nMSciKTsKICAgICAgfQogICAgICBlbHNlIHsKICAgICAgICBzYWZlX2luc2VydCgndHhw
X3ByZWZzJywgIm5hbWU9JyR2YXInLCB2YWw9J3skZGF0YVsnZGVmYXVsdCddfScsIHByZWZz
X2lkID0nMSciKTsKICAgICAgfQogICAgfQogIH0KfQoiO3M6MzoibWQ1IjtzOjMyOiJlYTlh
MzZlMzE0YTQ1NjY1NzY0MTk0M2QwODhjNjExZiI7fQ==
