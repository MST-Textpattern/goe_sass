# goe_sass v0.1
# Allow use of SASS for CSS output.
# Georg Oechsler
# http://txp.oechsler.de/

# ......................................................................
# This is a plugin for Textpattern - http://textpattern.com/
# To install: textpattern > admin > plugins
# Paste the following text into the 'Install plugin' box:
# ......................................................................

YToxMDp7czo3OiJ2ZXJzaW9uIjtzOjM6IjAuMSI7czo2OiJhdXRob3IiO3M6MTQ6Ikdlb3Jn
IE9lY2hzbGVyIjtzOjEwOiJhdXRob3JfdXJpIjtzOjIzOiJodHRwOi8vdHhwLm9lY2hzbGVy
LmRlLyI7czoxMToiZGVzY3JpcHRpb24iO3M6MzM6IkFsbG93IHVzZSBvZiBTQVNTIGZvciBD
U1Mgb3V0cHV0LiI7czo1OiJmbGFncyI7aToyO3M6NDoidHlwZSI7aToxO3M6NDoibmFtZSI7
czo4OiJnb2Vfc2FzcyI7czo0OiJoZWxwIjtzOjMzMDI6Igo8aDE+U2Fzc2lmeSBUZXh0cGF0
dGVybiE8L2gxPgoKPHA+VGhpcyBwbHVnaW4gYWxsb3dzIHRoZSB1c2Ugb2YgPGEgaHJlZj0i
aHR0cDovL3Nhc3MtbGFuZy5jb20vIj5TQVNTPC9hPiBmb3IgQ1NTIHByZXByb2Nlc3NpbmcK
d2l0aGluIHRleHRwYXR0ZXJuLjwvcD4KCjxwPkl0IHdpbGwgY29tcGlsZSB0aGUgU0FTUyBj
b2RlIHlvdSBkZWZpbmUgd2l0aGluIHRoZSByZWd1bGFyIENTUyBzdHlsZSBmb3JtIHRvCnN0
YXRpYyBDU1MgZmlsZXMsIHNlcnZpbmcgaXQgdGhyb3VnaCBhIHRhZyB3aGljaCBpcyBxdWl0
ZSBzaW1pbGFyIHRvIHRoZSB3ZWxsCmtub3duICZsdDt0eHA6Y3NzIC8mZ3Q7IHRhZy48L3A+
Cgo8cD5UaGlzIHBsdWdpbiByZWxpZXMgb24gPGEgaHJlZj0iaHR0cDovL3BocHNhc3MuY29t
LyI+cGhwU0FTUzwvYT4gYW5kIGJvcnJvd3MgY29kZSBmcm9tIHRoZQo8YSBocmVmPSJodHRw
czovL2RydXBhbC5vcmcvcHJvamVjdC9zYXNzeSI+c2Fzc3k8L2E+IG1vZHVsZSBmb3IgRHJ1
cGFsLjwvcD4KCjxwPkl0IHN0YXJ0ZWQgb2ZmIGFzIGEgaGFjayBvZiA8YSBocmVmPSJodHRw
Oi8vdGV4dHBhdHRlcm4ub3JnL3BsdWdpbnMvOTM0L3J2bV9jc3MiPnJ2bV9jc3M8L2E+LAp3
aGljaCBjYW4gZG8gc2ltaWxhciB0aGluZ3Mgd2l0aCBMRVNTLiBVbmRlciB0aGUgaG9vZCB5
b3Ugd2lsbCBmaW5kIHRoYXQgaXQgaXMgc3RpbGwKaGVhdmlseSBiYXNlZCBvbiB0aGUgY29k
ZSBvZiB0aGUgZ3JlYXQgPGEgaHJlZj0iaHR0cDovL3Zhbm1lbGljay5jb20vIj5SdXVkIHZh
biBNZWxpY2s8L2E+LjwvcD4KCjxoMj5JbnN0YWxsYXRpb248L2gyPgoKPG9sPgo8bGk+R3Jh
YiBhIGNvcHkgb2YgPGEgaHJlZj0iaHR0cDovL3BocHNhc3MuY29tLyI+UEhQU2FzczwvYT4g
YW5kIHB1dCBpdCBzb21ld2hlcmUgeW91cgp3ZWJzZXJ2ZXIgY2FuIGZpbmQgaXQuIFRoZSBk
ZWZhdWx0IGxvY2F0aW9uIGlzICYjODIxNjt0ZXh0cGF0dGVybi92ZW5kb3IvcGhwc2FzcyYj
ODIxNzsuPC9saT4KPGxpPkNyZWF0ZSBhIGRpcmVjdG9yeSBmb3IgdGhlIHN0YXRpYyBDU1Mg
ZmlsZXMgb24geW91ciB3ZWJzZXJ2ZXIuIFlvdSBzaG91bGQgbWFrZQpzdXJlIHRoYXQgUEhQ
IGlzIGFibGUgdG8gd3JpdGUgdG8gdGhhdCBkaXJlY3RvcnkuIFRoZSBkZWZhdWx0IHBhdGgg
dG8gdGhpcwpkaXJlY3RvcnkgaXMgL2Nzcy48L2xpPgo8bGk+SW5zdGFsbCBhbmQgZW5hYmxl
IHRoZSBwbHVnaW4gbGlrZSBhbnkgb3RoZXIgcGx1Z2luIG91dCB0aGVyZS48L2xpPgo8bGk+
Q2hlY2sgYW5kIGFkanVzdCB0aGUgY29uZmlndXJhdGlvbiB1bmRlciB0aGUgZXh0ZW5zaW9u
cyB0YWIuIEl0IHNoaXBzIHdpdGgKc2FuZSBkZWZhdWx0LiBTZWUgc2VjdGlvbiAmIzgyMjA7
Q29uZmlndXJhdGlvbiYjODIyMTsgZm9yIGRldGFpbHMuPC9saT4KPGxpPklmIHlvdSB3YW50
IHRvIHBsYXkgc2FmZTogUmVzYXZlIGEgQ1NTIHN0eWxlIGRlZmluaXRpb24gZm9ybSBhbmQg
c2VlIGlmIHRoZXJlCmlzIGEgZmlsZSB3cml0dGVuIHRvIHRoZSBvdXRwdXQgZGlyZWN0b3J5
IHlvdSBoYXZlIGNvbmZpZ3VyZWQgaW4gc3RlcCAyLiBZb3UmIzgyMTc7bGwKbmVlZCB0byBy
ZXNhdmUgYWxsIHlvdXIgc3R5bGUgc2hlZXRzIGFueXdheSB0byBjcmVhdGUgdGhlIHN0YXRp
YyBmaWxlcy48L2xpPgo8bGk+T25jZSB5b3VyIHNldCB5b3UgbWF5IHJlcGxhY2UgYWxsIG9j
Y3VycmVuY2VzIG9mICZsdDt0eHA6Y3NzIC8mZ3Q7IHdpdGgKJmx0O3R4cDpnb2Vfc2FzcyAv
Jmd0Oy48L2xpPgo8L29sPgoKPHA+VGhlICZsdDt0eHA6Z29lX3Nhc3MgLyZndDsgdGFnIHN1
cHBsaWVkIGJ5IHRoaXMgcGx1Z2luIGhhcyB0aGUgZXhhY3Qgc2FtZQphdHRyaWJ1dGVzIGFz
IHRoZSBidWlsdC1pbiAmbHQ7dHhwOmNzcyAvJmd0OyB0YWcgYW5kIGNhbiBiZSB1c2VkIGFz
IGEgZHJvcC1pbgpyZXBsYWNlbWVudC48L3A+Cgo8cD5Ob3RlOiBCZWNhdXNlIG5vdCBhbGwg
Y2hhcmFjdGVycyBhcmUgYWxsb3dlZCBpbiBmaWxlbmFtZXMsIGF2b2lkIHVzaW5nCm5vbi1h
bHBoYW51bWVyaWMgY2hhcmFjdGVycyBpbiBzdHlsZSBzaGVldCBuYW1lcy48L3A+Cgo8aDI+
Q29uZmlndXJhdGlvbjwvaDI+Cgo8cD5UaGVyZSBhcmUgZm91ciBjb25maWd1cmF0aW9uIGl0
ZW1zIGZvciB0aGlzIHBsdWdpbjo8L3A+Cgo8ZGw+CjxkdD5QYXRoIHRvIFBIUFNhc3M8L2R0
Pgo8ZGQ+VGhlIGZpbGVzeXN0ZW0gcGF0aCB0byBQSFBTYXNzLiBUaGlzIGlzIHdoZXJlIHRo
ZSBmaWxlIFNhc3NQYXJzZXIucGhwIHNpdHMgaW4uPC9kZD4KPGRkPmRlZmF1bHQgdmFsdWU6
IFtwYXRoIHRvIHRleHRwYXR0ZXJuIGRpcmVjdG9yeV0gKyB2ZW5kb3IvcGhwc2FzczwvZGQ+
CjwvZGw+Cgo8ZGw+CjxkdD5DU1MgT3V0cHV0IERpcmVjdG9yeTwvZHQ+CjxkZD5UaGUgbG9j
YXRpb24gb2YgdGhlIGNzcyBvdXRwdXQgZGlyZWN0b3J5IHJlbGF0aXZlIHRvIGRvY3VtZW50
IHJvb3QuPC9kZD4KPGRkPmRlZmF1bHQgdmFsdWU6IC9jc3M8L2RkPgo8L2RsPgoKPGRsPgo8
ZHQ+T3V0cHV0IFN0eWxlPC9kdD4KPGRkPlRoZXJlIGFyZSBzZXZlcmFsIG91dHB1dCBzdHls
ZXMgdG8gY2hvb3NlIGZyb20uIENob2ljZSBpcyB5b3Vycy48L2RkPgo8ZGQ+bmVzdGVkOiBF
YWNoIHByb3BlcnR5K3NlbGVjdG9yIHRha2VzIHVwIDEgbGluZSBzZWxlY3RvciBpbmRlbnRh
dGlvbiByZWZsZWN0cyBuZXN0aW5nIGRlcHRoLjwvZGQ+CjxkZD5leHBhbmRlZDogRWFjaCBw
cm9wZXJ0eStzZWxlY3RvciB0YWtlcyB1cCAxIGxpbmUgbm8gc2VsZWN0b3IgaW5kZW50YXRp
b24uPC9kZD4KPGRkPmNvbXBhY3Q6IEVhY2ggc2VsZWN0b3IgdGFrZXMgdXAgMSBsaW5lIHdp
dGggcHJvcGVydGllcyBvbiB0aGUgc2FtZSBsaW5lLiBObyBpbmRlbnRhdGlvbi48L2RkPgo8
ZGQ+Y29tcHJlc3NlZDogQ29tcHJlc3NlZDogQWxtb3N0IG5vIHdoaXRlc3BhY2UgZGVzaWdu
ZWQgdG8gYmUgYXMgc3BhY2UtZWZmaWNpZW50IGFzIHBvc3NpYmxlLjwvZGQ+CjxkZD5kZWZh
dWx0IHZhbHVlOiBuZXN0ZWQ8L2RkPgo8L2RsPgoKPGRsPgo8ZHQ+TGFuZ3VhZ2UgU3ludGF4
PC9kdD4KPGRkPlBIUFNhc3Mgc3VwcG9ydHMgdHdvIHN5bnRheCBvcHRpb25zLjwvZGQ+Cjxk
ZD5zY3NzOiBUaGUgcmVndWxhciAmIzgyMjA7U2Fzc3kgQ1NTJiM4MjIxOyBzdHlsZSB3aGlj
aCBpcyBhIHN1cGVyc2V0IG9mIENTUzMmIzgyMTc7cyBzeW50YXguPC9kZD4KPGRkPnNhc3M6
IFRoZSBvbGRlciBzeW50YXgga25vd24gYXMgdGhlIGluZGVudGVkIHN5bnRheC48L2RkPgo8
ZGQ+ZGVmYXVsdCB2YWx1ZTogc2NzczwvZGQ+CjwvZGw+CjwvZGl2PgoKIjtzOjQ6ImNvZGUi
O3M6NzEyOToiaWYgKHR4cGludGVyZmFjZSA9PSAnYWRtaW4nKSB7CiAgcmVnaXN0ZXJfY2Fs
bGJhY2soJ2dvZV9zYXNzX2Nzc19zYXZlJywgJ2NzcycsICdjc3Nfc2F2ZScpOwogIHJlZ2lz
dGVyX2NhbGxiYWNrKCdnb2Vfc2Fzc19jc3Nfc2F2ZScsICdjc3MnLCAnY3NzX3NhdmVfcG9z
dGVkJyk7CiAgcmVnaXN0ZXJfY2FsbGJhY2soJ2dvZV9zYXNzX2Nzc19zYXZlJywgJ2Nzcycs
ICdkZWxfZGVjJyk7CiAgcmVnaXN0ZXJfY2FsbGJhY2soJ2dvZV9zYXNzX2Nzc19kZWxldGUn
LCAnY3NzJywgJ2Nzc19kZWxldGUnKTsKICByZWdpc3Rlcl9jYWxsYmFjaygnZ29lX3Nhc3Nf
Y2xlYW51cCcsICdwbHVnaW5fbGlmZWN5Y2xlLmdvZV9zYXNzJywgJ2RlbGV0ZWQnKTsKICBy
ZWdpc3Rlcl9jYWxsYmFjaygnZ29lX3Nhc3NfZGVmYXVsdF9wcmVmcycsICdwbHVnaW5fbGlm
ZWN5Y2xlLmdvZV9zYXNzJywgJ2VuYWJsZWQnKTsKICByZWdpc3Rlcl9jYWxsYmFjaygnZ29l
X3Nhc3NfcHJlZnMnLCAncGx1Z2luX3ByZWZzLmdvZV9zYXNzJyk7CgogIC8vIFJlZ2lzdGVy
IGV2ZW50IHNhc3Njb25maWcgd2l0aCBvd24gdGFiIHVuZGVyIGV4dGVuc2lvbnMgYW5kIHJl
c3BlY3RpdmUgY2FsbGJhY2suCiAgYWRkX3ByaXZzKCdzYXNzY29uZmlnJyk7CiAgcmVnaXN0
ZXJfdGFiKCdleHRlbnNpb25zJywgJ3Nhc3Njb25maWcnLCBnVHh0KCdTQVNTIENvbmZpZ3Vy
YXRpb24nKSk7CiAgcmVnaXN0ZXJfY2FsbGJhY2soJ2dvZV9zYXNzX2FkbWluJywgJ3Nhc3Nj
b25maWcnKTsKfQoKCi8qKgogKiBDb2RlIGZvciB0aGUgPHR4cDpnb2Vfc2FzcyAvPiB0YWcu
CiAqCiAqIEJlaGF2ZXMgcHJldHR5IG11Y2ggbGlrZSA8dHhwOmNzcyAvPiB0YWcsIGJ1dCBs
aW5rcyBvdXIgY29tcGlsZWQgU0FTUyBvdXRwdXQKICogYXMgc3RhdGljIGZpbGVzLgogKi8K
ZnVuY3Rpb24gZ29lX3Nhc3MoJGF0dHMpIHsKICBnbG9iYWwgJHR4cF9lcnJvcl9jb2RlLCAk
cywgJHBhdGhfdG9fc2l0ZSwgJHZlcnNpb247CgogICRnb2Vfc2Fzc19jc3NfZGlyID0gc2Fm
ZV9maWVsZCgndmFsJywgJ3R4cF9wcmVmcycsICJuYW1lPSdnb2Vfc2Fzc19jc3NfZGlyJyIp
OwoKICBleHRyYWN0KGxBdHRzKGFycmF5KAogICAgJ2Zvcm1hdCcgPT4gJ3VybCcsCiAgICAn
bWVkaWEnICA9PiAnc2NyZWVuJywKICAgICduJyAgICAgID0+ICcnLAogICAgJ25hbWUnICAg
PT4gJycsCiAgICAncmVsJyAgICA9PiAnc3R5bGVzaGVldCcsCiAgICAndGl0bGUnICA9PiAn
JywKICApLCAkYXR0cykpOwoKICBpZiAoISRuIGFuZCAhJG5hbWUpIHsKICAgIGlmICgkcykg
ewogICAgICAkbmFtZSA9IHNhZmVfZmllbGQoJ2NzcycsICd0eHBfc2VjdGlvbicsICJuYW1l
PSciLmRvU2xhc2goJHMpLiInIik7CiAgICB9CiAgICBlbHNlIHsKICAgICAgJG5hbWUgPSAn
ZGVmYXVsdCc7CiAgICB9CiAgfQogIGVsc2VpZiAoISRuYW1lKSB7CiAgICAkbmFtZSA9ICRu
OwogIH0KCiAgJGZpbGUgPSAkZ29lX3Nhc3NfY3NzX2RpciAuICcvJyAuIHN0cnRvbG93ZXIo
c2FuaXRpemVGb3JVcmwoJG5hbWUpKS4nLmNzcyc7CgogIGlmIChlbXB0eSgkZ29lX3Nhc3Nf
Y3NzX2Rpcikgb3IgIWlzX3JlYWRhYmxlKCRwYXRoX3RvX3NpdGUuJy8nLiRmaWxlKSkgewog
ICAgaWYgKHZlcnNpb25fY29tcGFyZSgkdmVyc2lvbiwgJzQuMy4wJywgJz49JykpIHsKICAg
ICAgdW5zZXQoJGF0dHNbJ24nXSk7CiAgICAgICRhdHRzWyduYW1lJ10gPSAkbmFtZTsKICAg
IH0gZWxzZSB7CiAgICAgIHVuc2V0KCRhdHRzWyduYW1lJ10pOwogICAgICAkYXR0c1snbidd
ID0gJG5hbWU7CiAgICB9CiAgICByZXR1cm4gY3NzKCRhdHRzKTsKICB9CgogIGlmICgkZm9y
bWF0ID09ICdsaW5rJykgewogICAgcmV0dXJuICc8bGluayByZWw9IicuJHJlbC4nIiB0eXBl
PSJ0ZXh0L2NzcyInLgogICAgICAoJG1lZGlhID8gJyBtZWRpYT0iJy4kbWVkaWEuJyInIDog
JycpLgogICAgICAoJHRpdGxlID8gJyB0aXRsZT0iJy4kdGl0bGUuJyInIDogJycpLgogICAg
ICAnIGhyZWY9IicuaHUuJGZpbGUuJyIgLz4nOwogIH0KCiAgcmV0dXJuIGh1LiRmaWxlOwp9
CgovKioKICogQ2FsbGJhY2sgZm9yIHRoZSAiY3NzX3NhdmUiIGV2ZW50LgogKgogKiBDb21w
aWxlIFNBU1MgY29kZSBmcm9tIGRhdGFiYXNlIGFuZCBzYXZlIGl0IHRvIENTUyBmaWxlcy4K
ICovCmZ1bmN0aW9uIGdvZV9zYXNzX2Nzc19zYXZlKCkgewogIGdsb2JhbCAkcGF0aF90b19z
aXRlOwoKICAkdmFycyA9IGdvZV9zYXNzX3ZhcnMoKTsKICBmb3JlYWNoICgkdmFycyBhcyAk
dmFyID0+ICRkYXRhKSB7CiAgICAkJHZhciA9IHNhZmVfZmllbGQoJ3ZhbCcsICd0eHBfcHJl
ZnMnLCAibmFtZT0nJHZhciciKTsKICB9CgogICRuYW1lID0gKHBzKCdjb3B5Jykgb3IgcHMo
J3NhdmVuZXcnKSkgPyBwcygnbmV3bmFtZScpIDogcHMoJ25hbWUnKTsKICAkZmlsZW5hbWUg
PSBzdHJ0b2xvd2VyKHNhbml0aXplRm9yVXJsKCRuYW1lKSk7CgogIGlmIChlbXB0eSgkZ29l
X3Nhc3NfY3NzX2Rpcikgb3IgISRmaWxlbmFtZSkgewogICAgcmV0dXJuOwogIH0KCiAgJGNz
cyA9IHNhZmVfZmllbGQoJ2NzcycsICd0eHBfY3NzJywgIm5hbWU9JyIuZG9TbGFzaCgkbmFt
ZSkuIiciKTsKCiAgaWYgKCRjc3MpIHsKICAgIGlmIChwcmVnX21hdGNoKCchXlthLXpBLVow
LTkvK10qPXswLDJ9JCEnLCAkY3NzKSkgewogICAgICAkY3NzID0gYmFzZTY0X2RlY29kZSgk
Y3NzKTsKICAgIH0KCiAgICAkbGlicmFyeSA9ICRnb2Vfc2Fzc19wYXRoIC4gJy9TYXNzUGFy
c2VyLnBocCc7CiAgICAkdGVtcGxhdGVfZGlyID0gJHBhdGhfdG9fc2l0ZSAuICRnb2Vfc2Fz
c19jc3NfZGlyIC4gJy9zYXNzLXRlbXBsYXRlcyc7CgogICAgaWYgKGZpbGVfZXhpc3RzKCRs
aWJyYXJ5KSkgewogICAgICB0cnkgewogICAgICAgIHJlcXVpcmVfb25jZSAoJGxpYnJhcnkp
OwoKICAgICAgICAkb3B0aW9ucyA9IGFycmF5KAogICAgICAgICAgJ2RlYnVnJyA9PiBUUlVF
LAogICAgICAgICAgJ3N5bnRheCcgPT4gJGdvZV9zYXNzX3N0eWxlLAogICAgICAgICAgJ3N0
eWxlJyA9PiAkZ29lX3Nhc3Nfc3R5bGUsCiAgICAgICAgICAnbG9hZF9wYXRocycgPT4gYXJy
YXkoJHRlbXBsYXRlX2RpciksCiAgICAgICAgKTsKCiAgICAgICAgJHBhcnNlciA9IG5ldyBT
YXNzUGFyc2VyKCRvcHRpb25zKTsKICAgICAgICAkY3NzID0gJHBhcnNlci0+dG9Dc3MoJGNz
cywgZmFsc2UpOwogICAgICB9CiAgICAgIGNhdGNoIChFeGNlcHRpb24gJGUpIHsKICAgICAg
ICBwcmludCAiPHNjcmlwdD5hbGVydCgnU0FTUyBFcnJvcjogIiAuIHByZWdfcmVwbGFjZSgn
L1xuLycsICcgJywgJGUtPmdldE1lc3NhZ2UoKSkgLiAiJyk7PC9zY3JpcHQ+IjsKICAgICAg
ICByZXR1cm47CiAgICAgIH0KICAgIH0KCiAgICAkZmlsZSA9ICRwYXRoX3RvX3NpdGUgLiAn
LycgLiAkZ29lX3Nhc3NfY3NzX2RpciAuICcvJyAuICRmaWxlbmFtZTsKICAgICRoYW5kbGUg
PSBmb3BlbigkZmlsZSAuICcuY3NzJywgJ3diJyk7CiAgICBmd3JpdGUoJGhhbmRsZSwgJGNz
cyk7CiAgICBmY2xvc2UoJGhhbmRsZSk7CiAgICBjaG1vZCgkZmlsZSAuICcuY3NzJywgMDY0
NCk7CiAgfQp9CgoKLyoqCiAqIENhbGxiYWNrIGZvciB0aGUgImNzcyIgZXZlbnQuCiAqIFRy
aWdnZXJlZCB3aGVuIGNzcyBpcyBkZWxldGVkLgogKgogKiBVbmxpbmsgY29tcGlsZWQgY3Nz
IGZpbGVzLgogKi8KZnVuY3Rpb24gZ29lX3Nhc3NfY3NzX2RlbGV0ZSgpCnsKICBnbG9iYWwg
JHBhdGhfdG9fc2l0ZTsKCiAgJGdvZV9zYXNzX2Nzc19kaXIgPSBzYWZlX2ZpZWxkKCd2YWwn
LCAndHhwX3ByZWZzJywgIm5hbWU9J2dvZV9zYXNzX2Nzc19kaXInIik7CgogIGlmIChzYWZl
X2ZpZWxkKCdjc3MnLCAndHhwX2NzcycsICJuYW1lPSciLmRvU2xhc2gocHMoJ25hbWUnKSku
IiciKSkgewogICAgcmV0dXJuOwogIH0KCiAgJG5hbWUgPSBzdHJ0b2xvd2VyKHNhbml0aXpl
Rm9yVXJsKHBzKCduYW1lJykpKTsKICAkZmlsZSA9ICRwYXRoX3RvX3NpdGUgLiAkZ29lX3Nh
c3NfY3NzX2RpciAuICcvJyAuICRuYW1lOwoKICBpZiAoIWVtcHR5KCRnb2Vfc2Fzc19jc3Nf
ZGlyKSBhbmQgJG5hbWUpIHsKICAgIHVubGluaygkZmlsZS4nLmNzcycpOwogIH0KfQoKLyoq
CiAqIEhlbHBlciByZXR1cm5pbmcgY29uZmlndXJhdGlvbiB2YXJpYWJsZSBkYXRhLgogKi8K
ZnVuY3Rpb24gZ29lX3Nhc3NfdmFycygpIHsKICBnbG9iYWwgJHBhdGhfdG9fc2l0ZTsKCiAg
cmV0dXJuIGFycmF5KAogICAgJ2dvZV9zYXNzX3BhdGgnID0+IGFycmF5KAogICAgICAndGl0
bGUnID0+ICdQYXRoIHRvIFBIUFNhc3MnLAogICAgICAnZGVmYXVsdCcgPT4gdHhwYXRoIC4g
Jy92ZW5kb3IvcGhwc2FzcycsCiAgICApLAogICAgJ2dvZV9zYXNzX2Nzc19kaXInID0+IGFy
cmF5KAogICAgICAndGl0bGUnID0+ICdDU1MgT3V0cHV0IERpcmVjdG9yeScsCiAgICAgICdk
ZWZhdWx0JyA9PiAnL2NzcycsCiAgICApLAogICAgJ2dvZV9zYXNzX3N0eWxlJyA9PiBhcnJh
eSgKICAgICAgJ3RpdGxlJyA9PiAnT3V0cHV0IFN0eWxlJywKICAgICAgJ2RlZmF1bHQnID0+
ICduZXN0ZWQnLAogICAgKSwKICAgICdnb2Vfc2Fzc19zeW50YXgnID0+IGFycmF5KAogICAg
ICAndGl0bGUnID0+ICdMYW5ndWFnZSBTeW50YXgnLAogICAgICAnZGVmYXVsdCcgPT4gJ3Nj
c3MnLAogICAgKSwKICApOwp9CgovKioKICogQ2FsbGJhY2sgZm9yIHRoZSAicGx1Z2luX2xp
ZmVjeWNsZSIgZXZlbnQuCiAqIFRyaWdnZXJlZCB3aGVuIHRoZSBwbHVnaW4gaXMgZGVsZXRl
ZC4KICoKICogRGlzcG9zZSBjb25maWcgdmFyaWFibGVzLgogKi8KZnVuY3Rpb24gZ29lX3Nh
c3NfY2xlYW51cCgkZXZlbnQsICRzdGVwKSB7CiAgJHZhcnMgPSBnb2Vfc2Fzc192YXJzKCk7
CgogIC8vRGVsZXRlIGNvbmZpZyB2YXJpYWJsZXMuCiAgZm9yZWFjaCAoYXJyYXlfa2V5cygk
dmFycykgYXMgJHZhcikgewogICAgc2FmZV9kZWxldGUoJ3R4cF9wcmVmcycsICJuYW1lPSck
dmFyJyIpOwogIH0KfQoKLyoqCiAqIENhbGxiYWNrIGZvciB0aGUgInNhc3Njb25maWciIGV2
ZW50LgogKgogKiBTaG93IGFuZCBwcm9jZXNzIGNvbmZpZ3VyYXRpb24gZm9ybS4KICovCmZ1
bmN0aW9uIGdvZV9zYXNzX2FkbWluKCRldmVudCwgJHN0ZXApIHsKCiAgaW5jbHVkZSh0eHBh
dGggLiAnL2luY2x1ZGUvdHhwX3ByZWZzLnBocCcpOwoKICAkdmFycyA9IGdvZV9zYXNzX3Zh
cnMoKTsKCiAgLy8gUmVhZCB2YWx1ZSBmcm9tIGRhdGFiYXNlIG9yIHVzZSBkZWZhdWx0cwog
IGZvcmVhY2ggKCR2YXJzIGFzICR2YXIgPT4gJGRhdGEpIHsKICAgICQkdmFyID0gc2FmZV9m
aWVsZCgndmFsJywgJ3R4cF9wcmVmcycsICJuYW1lPSckdmFyJyIpOwoKICAgIGlmICghICQk
dmFyKSB7CiAgICAgIGlmICgkJHZhciA9PT0gJycpIHsKICAgICAgICBzYWZlX3VwZGF0ZSgn
dHhwX3ByZWZzJywgInZhbCA9ICd7JGRhdGFbJ2RlZmF1bHQnXX0nIiwgIm5hbWUgPSAnJHZh
cicgYW5kIHByZWZzX2lkID0nMSciKTsKICAgICAgfQogICAgICBlbHNlIHsKICAgICAgICBz
YWZlX2luc2VydCgndHhwX3ByZWZzJywgIm5hbWU9JyR2YXInLCB2YWw9J3skZGF0YVsnZGVm
YXVsdCddfScsIHByZWZzX2lkID0nMSciKTsKICAgICAgfQogICAgICAkJHZhciA9ICRkYXRh
WydkZWZhdWx0J107CiAgICB9CiAgfQoKICAvLyBTYXZlIHZhbHVlcyBpZiBmb3JtIHdhcyBz
dWJtaXR0ZWQKICBpZiAoZ3BzKCJzdWJtaXQiKSkgewogICAgZm9yZWFjaCAoYXJyYXlfa2V5
cygkdmFycykgYXMgJHZhcikgewogICAgICBzYWZlX3VwZGF0ZSgndHhwX3ByZWZzJywgInZh
bCA9ICciLmFkZHNsYXNoZXMocHMoJHZhcikpLiInIiwibmFtZSA9ICckdmFyJyBhbmQgcHJl
ZnNfaWQgPScxJyIpOwogICAgfQogICAgaGVhZGVyKCJMb2NhdGlvbjogaW5kZXgucGhwP2V2
ZW50PXNhc3Njb25maWciKTsKICB9CgogIC8vIE91dHB1dCBmb3JtCiAgJHNhc3NDb25maWdU
eHQgPSBnVHh0KCJTQVNTIENvbmZpZ3VyYXRpb24iKTsKICBwYWdldG9wKCRzYXNzQ29uZmln
VHh0KTsKCiAgJHRkYVN0eWxlID0gJyBzdHlsZT0idGV4dC1hbGlnbjpyaWdodDt2ZXJ0aWNh
bC1hbGlnbjptaWRkbGUiJzsKICAkZm9ybSA9IHN0YXJ0VGFibGUoImxpc3QiKSAuIHRyKHRk
Y3MoaGVkKCRzYXNzQ29uZmlnVHh0LDEpLDIpKTsKCiAgZm9yZWFjaCAoJHZhcnMgYXMgJHZh
ciA9PiAkZGF0YSkgewogICAgJGZvcm0gLj0gdHIodGRhKGdUeHQoJGRhdGFbJ3RpdGxlJ10p
LCAkdGRhU3R5bGUpIC4gdGRhKHRleHRfaW5wdXQoJHZhciwgJCR2YXIsICc0MCcpLCAnJykp
OwogIH0KCiAgJGZvcm0gLj0gdHIodGRhKGdyYWYoZklucHV0KCJzdWJtaXQiLCJzdWJtaXQi
LCBnVHh0KCJTdWJtaXQiKSwgInB1Ymxpc2giKSksICcgY29sc3Bhbj0iMiInKSk7CiAgJGZv
cm0gLj0gZUlucHV0KCJzYXNzY29uZmlnIik7CiAgJGZvcm0gLj0gZW5kVGFibGUoKTsKCiAg
ZWNobyBmb3JtKCRmb3JtKTsKfQoKLyoqCiAqIENhbGxiYWNrIGZvciB0aGUgInBsdWdpbl9s
aWZlY3ljbGUiIGV2ZW50LgogKiBUcmlnZ2VyZWQgd2hlbiB0aGUgcGx1Z2luIGlzIGVuYWJs
ZWQuCiAqCiAqIFNldHVwIGRlZmF1bHQgY29uZmlnIHZhcmlhYmxlcy4KICovCmZ1bmN0aW9u
IGdvZV9zYXNzX2RlZmF1bHRfcHJlZnMoJGV2ZW50LCAkc3RlcCkgewoKICBpbmNsdWRlKHR4
cGF0aCAuICcvaW5jbHVkZS90eHBfcHJlZnMucGhwJyk7CgogICR2YXJzID0gZ29lX3Nhc3Nf
dmFycygpOwoKICAvLyBJZiB2YXJpYWJsZXMgYXJlIG5vdCBzZXQgb3IgZW1wdHkgd3JpdGUg
ZGVmYXVsdCB2YWx1ZXMuCiAgZm9yZWFjaCAoJHZhcnMgYXMgJHZhciA9PiAkZGF0YSkgewog
ICAgJCR2YXIgPSBzYWZlX2ZpZWxkKCd2YWwnLCAndHhwX3ByZWZzJywgIm5hbWU9JyR2YXIn
Iik7CgogICAgaWYgKCEgJCR2YXIpIHsKICAgICAgaWYgKCQkdmFyID09PSAnJykgewogICAg
ICAgIHNhZmVfdXBkYXRlKCd0eHBfcHJlZnMnLCAidmFsID0gJ3skZGF0YVsnZGVmYXVsdCdd
fSciLCAibmFtZSA9ICckdmFyJyBhbmQgcHJlZnNfaWQgPScxJyIpOwogICAgICB9CiAgICAg
IGVsc2UgewogICAgICAgIHNhZmVfaW5zZXJ0KCd0eHBfcHJlZnMnLCAibmFtZT0nJHZhcics
IHZhbD0neyRkYXRhWydkZWZhdWx0J119JywgcHJlZnNfaWQgPScxJyIpOwogICAgICB9CiAg
ICB9CiAgfQp9CiI7czozOiJtZDUiO3M6MzI6IjI2ZjBiY2M5OWZiZDMxYjI5NTFlNzI5MzE0
ZTZiZWE3Ijt9
